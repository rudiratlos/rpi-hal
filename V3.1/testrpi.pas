 program testrpi;
  uses rpi_hal;
  const piggyback=1; piface=2; board_installed=0; //board_installed=piggyback;
  begin
    writeln('Show CPU-Info, RPI-HW-Info and Registers:');
    rpi_show_all_info;
	case board_installed of
	  piggyback : begin
					writeln('Let Status LED Blink. Using GPIO functions:');
	                GPIO_PIN_TOGGLE_TEST;
                    writeln('Test SPI Read function. (piggy back board with installed RFM22B Module is required!)');
					Test_SPI;
				  end;
	  piface :    begin
					writeln('Let Status LED Blink. Using GPIO functions:');
					GPIO_PIN_TOGGLE_TEST;
                    writeln('Test SPI function. (PiFace board needs to be installed)');
					pfio_init(0); // PiFace MCP23S17SP on Adr. 0 (A2 A1 A0 pins set to GND)
                    pfio_test(0);
				  end;
	  else        begin
	                Test_BiDirectionDevice_in_UserSpace;
	                (*writeln('Set GPIO18 to PWM');
	                gpio_set_PINMODE(18,gpio_PWM_OUTPUT);
					rpi_show_all_info;*)
	              end;
	end;
  end.
  
(*
Show CPU-Info, RPI-HW-Info and Registers:
rpi Snr  : 00000000a5be9197
rpi HW   : BCM2708
rpi proc : 0
rpi rev  : rev1;256MB;A+;0012
rpi mips : 
rpi Freq : 700000;700000;900000;Hz

GPIOBase : 00020200  PageSize: 4096 GPIO-Map-ptr:  0xB6F8D000
GPFSEL0  : 0010 0100 1000 0000 0000 1001 0000 0000 P09:A0 P08:A0 P07:A0 P06:I  P05:I  P04:I  P03:A0 P02:A0 P01:I  P00:I  
GPFSEL1  : 0000 0001 0010 0110 0100 0000 0010 0100 P19:I  P18:O  P17:O  P16:O  P15:A0 P14:A0 P13:I  P12:I  P11:A0 P10:A0 
GPFSEL2  : 0010 0100 0000 0000 1000 0000 0000 0000 P29:A0 P28:A0 P27:I  P26:I  P25:O  P24:I  P23:I  P22:I  P21:I  P20:I  
GPFSEL3  : 0000 0001 0000 0000 0000 0000 0100 1000 P39:I  P38:O  P37:I  P36:I  P35:I  P34:I  P33:I  P32:O  P31:O  P30:I  
GPFSEL4  : 0011 1111 0010 0010 0100 0000 0000 1100 P49:A3 P48:A3 P47:O  P46:I  P45:A0 P44:A0 P43:I  P42:I  P41:O  P40:A0 
GPFSEL5  : 0000 0000 0000 0000 0000 1111 1111 1111 P59:I  P58:I  P57:I  P56:I  P55:I  P54:I  P53:A3 P52:A3 P51:A3 P50:A3 
Reg[6]   : 0000 0000 0000 0000 0000 0000 0000 0000 0x00000000
GPSET0   : 0110 0111 0111 0000 0110 1001 0110 1111 0x6770696F
GPSET1   : 0110 0111 0111 0000 0110 1001 0110 1111 0x6770696F
Reg[9]   : 0110 0111 0111 0000 0110 1001 0110 1111 0x6770696F
GPCLR0   : 0110 0111 0111 0000 0110 1001 0110 1111 0x6770696F
GPCLR1   : 0110 0111 0111 0000 0110 1001 0110 1111 0x6770696F
Reg[12]  : 0110 0111 0111 0000 0110 1001 0110 1111 0x6770696F
GPLEV0   : 1011 0000 0000 0001 1100 0001 1111 1111 0xB001C1FF
GPLEV1   : 0000 0000 0011 1111 0101 0000 0001 1100 0x003F501C
Reg[15]  : 0000 0000 0000 0000 0000 0000 0000 0000 0x00000000
GPEDS0   : 0000 0000 0000 0000 0000 0000 0000 0000 0x00000000
GPEDS1   : 0000 0000 0000 0000 0000 0000 0000 0000 0x00000000
Reg[18]  : 0000 0000 0000 0000 0000 0000 0000 0000 0x00000000
GPREN0   : 0000 0000 1000 0000 0000 0000 0000 0000 0x00800000
GPREN1   : 0000 0000 0000 0000 0000 0000 0000 1000 0x00000008
Reg[21]  : 0000 0000 0000 0000 0000 0000 0000 0000 0x00000000
GPFEN0   : 0000 0000 1000 0000 0000 0000 0000 0000 0x00800000
GPFEN1   : 0000 0000 0000 0000 0000 0000 0000 0000 0x00000000
Reg[24]  : 0000 0000 0000 0000 0000 0000 0000 0000 0x00000000
GPHEN0   : 0000 0000 0000 0000 0000 0000 0000 0000 0x00000000
GPHEN1   : 0000 0000 0000 0000 0000 0000 0000 0000 0x00000000
Reg[27]  : 0000 0000 0000 0000 0000 0000 0000 0000 0x00000000
GPLEN0   : 0000 0000 0000 0000 0000 0000 0000 0000 0x00000000
GPLEN1   : 0000 0000 0000 0000 0000 0000 0000 0000 0x00000000
Reg[30]  : 0000 0000 0000 0000 0000 0000 0000 0000 0x00000000
GPAREN0  : 0000 0000 0000 0000 0000 0000 0000 0000 0x00000000
GPAREN1  : 0000 0000 0000 0000 0000 0000 0000 0000 0x00000000
Reg[33]  : 0000 0000 0000 0000 0000 0000 0000 0000 0x00000000
GPAFEN0  : 0000 0000 0000 0000 0000 0000 0000 0000 0x00000000
GPAFEN1  : 0000 0000 0000 0000 0000 0000 0000 0000 0x00000000
Reg[36]  : 0000 0000 0000 0000 0000 0000 0000 0000 0x00000000
GPPUD0   : 0000 0000 0000 0000 0000 0000 0000 0000 0x00000000
GPPUDCLK0: 0000 0000 0000 0000 0000 0000 0000 0000 0x00000000

PWMBase  : 0002020C  PageSize: 4096 PWM-Map-ptr:   0xB6F8C000
Reg[0]   : 0000 0000 0000 0000 0000 0000 0000 0000 0x00000000
Reg[1]   : 0000 0000 0000 0000 0000 0000 0000 0010 0x00000002
Reg[2]   : 0000 0000 0000 0000 0000 0111 0000 0111 0x00000707
Reg[3]   : 0111 0000 0111 0111 0110 1101 0011 0000 0x70776D30
Reg[4]   : 0000 0000 0000 0000 0000 0000 0010 0000 0x00000020
Reg[5]   : 0000 0000 0000 0000 0000 0000 0000 0000 0x00000000
Reg[6]   : 0111 0000 0111 0111 0110 1101 0011 0000 0x70776D30
Reg[7]   : 0111 0000 0111 0111 0110 1101 0011 0000 0x70776D30
Reg[8]   : 0000 0000 0000 0000 0000 0000 0010 0000 0x00000020
Reg[9]   : 0000 0000 0000 0000 0000 0000 0000 0000 0x00000000

CLKBase  : 00020101  PageSize: 4096 CLK-Map-ptr:   0xB6F8B000
Reg[40]  : 0000 0000 0000 0000 0000 0010 0000 0000 0x00000200
Reg[41]  : 0000 0000 0000 0000 0000 0000 0000 0000 0x00000000
Set GPIO18 to PWM
rpi Snr  : 00000000a5be9197
rpi HW   : BCM2708
rpi proc : 0
rpi rev  : rev1;256MB;A+;0012
rpi mips : 
rpi Freq : 700000;700000;900000;Hz

GPIOBase : 00020200  PageSize: 4096 GPIO-Map-ptr:  0xB6F8D000
GPFSEL0  : 0010 0100 1000 0000 0000 1001 0000 0000 P09:A0 P08:A0 P07:A0 P06:I  P05:I  P04:I  P03:A0 P02:A0 P01:I  P00:I  
GPFSEL1  : 0000 0010 0010 0110 0100 0000 0010 0100 P19:I  P18:A5 P17:O  P16:O  P15:A0 P14:A0 P13:I  P12:I  P11:A0 P10:A0 
GPFSEL2  : 0010 0100 0000 0000 1000 0000 0000 0000 P29:A0 P28:A0 P27:I  P26:I  P25:O  P24:I  P23:I  P22:I  P21:I  P20:I  
GPFSEL3  : 0000 0001 0000 0000 0000 0000 0100 1000 P39:I  P38:O  P37:I  P36:I  P35:I  P34:I  P33:I  P32:O  P31:O  P30:I  
GPFSEL4  : 0011 1111 0010 0010 0100 0000 0000 1100 P49:A3 P48:A3 P47:O  P46:I  P45:A0 P44:A0 P43:I  P42:I  P41:O  P40:A0 
GPFSEL5  : 0000 0000 0000 0000 0000 1111 1111 1111 P59:I  P58:I  P57:I  P56:I  P55:I  P54:I  P53:A3 P52:A3 P51:A3 P50:A3 
Reg[6]   : 0000 0000 0000 0000 0000 0000 0000 0000 0x00000000
GPSET0   : 0110 0111 0111 0000 0110 1001 0110 1111 0x6770696F
GPSET1   : 0110 0111 0111 0000 0110 1001 0110 1111 0x6770696F
Reg[9]   : 0110 0111 0111 0000 0110 1001 0110 1111 0x6770696F
GPCLR0   : 0110 0111 0111 0000 0110 1001 0110 1111 0x6770696F
GPCLR1   : 0110 0111 0111 0000 0110 1001 0110 1111 0x6770696F
Reg[12]  : 0110 0111 0111 0000 0110 1001 0110 1111 0x6770696F
GPLEV0   : 1011 0000 0000 0001 1100 0001 1111 1111 0xB001C1FF
GPLEV1   : 0000 0000 0011 1110 0100 0000 0001 1100 0x003E401C
Reg[15]  : 0000 0000 0000 0000 0000 0000 0000 0000 0x00000000
GPEDS0   : 0000 0000 0000 0000 0000 0000 0000 0000 0x00000000
GPEDS1   : 0000 0000 0000 0000 0000 0000 0000 0000 0x00000000
Reg[18]  : 0000 0000 0000 0000 0000 0000 0000 0000 0x00000000
GPREN0   : 0000 0000 1000 0000 0000 0000 0000 0000 0x00800000
GPREN1   : 0000 0000 0000 0000 0000 0000 0000 1000 0x00000008
Reg[21]  : 0000 0000 0000 0000 0000 0000 0000 0000 0x00000000
GPFEN0   : 0000 0000 1000 0000 0000 0000 0000 0000 0x00800000
GPFEN1   : 0000 0000 0000 0000 0000 0000 0000 0000 0x00000000
Reg[24]  : 0000 0000 0000 0000 0000 0000 0000 0000 0x00000000
GPHEN0   : 0000 0000 0000 0000 0000 0000 0000 0000 0x00000000
GPHEN1   : 0000 0000 0000 0000 0000 0000 0000 0000 0x00000000
Reg[27]  : 0000 0000 0000 0000 0000 0000 0000 0000 0x00000000
GPLEN0   : 0000 0000 0000 0000 0000 0000 0000 0000 0x00000000
GPLEN1   : 0000 0000 0000 0000 0000 0000 0000 0000 0x00000000
Reg[30]  : 0000 0000 0000 0000 0000 0000 0000 0000 0x00000000
GPAREN0  : 0000 0000 0000 0000 0000 0000 0000 0000 0x00000000
GPAREN1  : 0000 0000 0000 0000 0000 0000 0000 0000 0x00000000
Reg[33]  : 0000 0000 0000 0000 0000 0000 0000 0000 0x00000000
GPAFEN0  : 0000 0000 0000 0000 0000 0000 0000 0000 0x00000000
GPAFEN1  : 0000 0000 0000 0000 0000 0000 0000 0000 0x00000000
Reg[36]  : 0000 0000 0000 0000 0000 0000 0000 0000 0x00000000
GPPUD0   : 0000 0000 0000 0000 0000 0000 0000 0000 0x00000000
GPPUDCLK0: 0000 0000 0000 0000 0000 0000 0000 0000 0x00000000

PWMBase  : 0002020C  PageSize: 4096 PWM-Map-ptr:   0xB6F8C000
Reg[0]   : 0000 0000 0000 0000 0000 0001 0000 0001 0x00000101
Reg[1]   : 0000 0000 0000 0000 0000 0110 0000 0010 0x00000602
Reg[2]   : 0000 0000 0000 0000 0000 0111 0000 0111 0x00000707
Reg[3]   : 0111 0000 0111 0111 0110 1101 0011 0000 0x70776D30
Reg[4]   : 0000 0000 0000 0000 0000 0100 0000 0000 0x00000400
Reg[5]   : 0000 0000 0000 0000 0000 0000 0000 0000 0x00000000
Reg[6]   : 0111 0000 0111 0111 0110 1101 0011 0000 0x70776D30
Reg[7]   : 0111 0000 0111 0111 0110 1101 0011 0000 0x70776D30
Reg[8]   : 0000 0000 0000 0000 0000 0100 0000 0000 0x00000400
Reg[9]   : 0000 0000 0000 0000 0000 0000 0000 0000 0x00000000

CLKBase  : 00020101  PageSize: 4096 CLK-Map-ptr:   0xB6F8B000
Reg[40]  : 0000 0000 0000 0000 0000 0000 1001 0001 0x00000091
Reg[41]  : 0000 0000 0000 0010 0000 0000 0000 0000 0x00020000

*)
